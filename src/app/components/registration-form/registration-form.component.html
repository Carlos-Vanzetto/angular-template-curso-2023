<div class="container custom-container">
  <div class="logoContainer">
    <app-icon class="logo-icon"></app-icon>
    <h1>Vanzeron</h1>
  </div>

  <form [formGroup]="registrationForm">
    <div class="container-fluid">
      <div class="d-flex">
        <fa-icon [icon]="faUser" class="formIcon"></fa-icon>
        <div class="form-group">
          <div class="form-floating">
            <input
              required
              autocomplete="on"
              type="text"
              id="user-name"
              class="form-control"
              formControlName="userName"
              aria-describedby="userHelp"
              placeholder="Your name"
              [ngClass]="[
                userName?.invalid && (userName?.touched || userName?.dirty) ? 'is-invalid' : '',
                userName?.valid ? 'is-valid' : ''
              ]"
            />
            <label class="control-label" for="user-name">Your Name</label>
          </div>
          <div
            *ngIf="userName?.invalid && (userName?.dirty || userName?.touched)"
            class="alert alert-danger"
            role="alert"
          >
            <div *ngIf="userName?.errors?.['required']">- User name is required</div>
          </div>
        </div>
      </div>
      <div class="d-flex">
        <fa-icon [icon]="faEnvelope" class="formIcon"></fa-icon>
        <div class="form-group">
          <div class="form-floating">
            <input
              required
              autocomplete="on"
              formControlName="email"
              type="email"
              class="form-control"
              id="email"
              aria-describedby="emailHelp"
              placeholder="Enter email"
              [ngClass]="[
                email?.invalid && (email?.touched || email?.dirty) ? 'is-invalid' : '',
                email?.valid ? 'is-valid' : ''
              ]"
            />
            <label for="email" class="control-label">Email address</label>
          </div>
          <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="alert alert-danger" role="alert">
            <div *ngIf="email?.errors?.['required']">- Email is required</div>
            <div *ngIf="email?.errors?.['pattern']">- Invalid email format</div>
          </div>
        </div>
      </div>
      <div class="d-flex">
        <fa-icon [icon]="faLock" class="formIcon"></fa-icon>
        <div class="form-group">
          <div class="form-floating">
            <input
              required
              formControlName="password"
              type="password"
              class="form-control"
              id="password"
              placeholder="Password"
              [ngClass]="[
                password?.invalid && (password?.touched || password?.dirty) ? 'is-invalid' : '',
                password?.valid ? 'is-valid' : ''
              ]"
            />
            <label for="password" class="control-label">Password</label>
          </div>
          <div
            *ngIf="password?.invalid && (password?.dirty || password?.touched)"
            class="alert alert-danger"
            role="alert"
          >
            <div *ngIf="password?.value == ''">- Password is required</div>
            <div *ngIf="password?.errors?.['pattern']" role="alert">
              <span>- Password requirements not met </span>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex">
        <fa-icon [icon]="faKey" class="formIcon"></fa-icon>
        <div class="form-group">
          <div class="form-floating">
            <input
              required
              formControlName="passwordRepeat"
              type="password"
              class="form-control"
              id="repeat-password"
              placeholder="Password"
              [ngClass]="[
                (passwordRepeat?.invalid && (passwordRepeat?.touched || passwordRepeat?.dirty)) || registrationForm.errors?.['ConfirmedValidator'] ? 'is-invalid' : '',
                (passwordRepeat?.valid && !registrationForm.errors?.['ConfirmedValidator'] ) ?  'is-valid' : ''
              ]"
            />
            <label class="control-label" for="repeat-password">Repeat your password</label>
          </div>
          <div
            *ngIf="(passwordRepeat?.invalid && (passwordRepeat?.dirty || passwordRepeat?.touched)) || registrationForm.errors?.['ConfirmedValidator']"
            class="alert alert-danger"
            role="alert"
          >
            <div *ngIf="passwordRepeat?.value == ''">- Please repeat your password</div>
            <div *ngIf="passwordRepeat?.errors?.['pattern']" role="alert">
              <span>- Password requirements not met </span>
            </div>
            <div
              *ngIf="registrationForm.errors?.['ConfirmedValidator'] && passwordRepeat?.value != '' && (registrationForm.touched || registrationForm.dirty)"
              role="alert"
            >
              - Passwords do not match
            </div>
          </div>
        </div>
      </div>
      <div class="form-check d-flex justify-content-center mb-3">
        <input
          required
          class="form-check-input me-2"
          formControlName="termsAgreement"
          type="checkbox"
          value=""
          id="terms-agreement"
        />
        <label class="form-check-label" for="terms-agreement">
          I agree all statements in <a href="#!">Terms of service</a>
        </label>
      </div>

      <div class="login-btn-container">
        <button
          type="submit"
          class="btn btn-primary btn-lg btn-block"
          [disabled]="registrationForm.invalid"
          [ngClass]="registrationForm.invalid ? 'btn-secondary' : null"
        >
          Register
        </button>
      </div>
    </div>
  </form>
</div>
